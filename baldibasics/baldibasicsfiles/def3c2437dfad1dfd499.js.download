(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{294:function(t,e,r){"use strict";(function(t){r(369),r(50);e.a={props:{post:{type:Object,required:!1}},computed:{start(){return this.$store.getters.game_start}},watch:{start(t){1==t&&this.checkUnityVersion()}},mounted(){this.post.game.fields.unity_script_head&&this.appendScript(this.post.game.fields.unity_script_head),1==this.start&&this.checkUnityVersion()},methods:{checkUnityVersion(){this.post.game.fields.unitywebglbuildurl?this.startUnity5_6():this.post.game.fields.dataurl?this.startUnity2020():this.post.game.fields.unityprogress&&this.startUnity5_4(),this.$store.dispatch("setGamestart")},hide_spinner(){this.$emit("is_load")},appendScript(path){var script=document.createElement("script");script.src=path,document.head.appendChild(script)},startUnity5_6(){var t=this;function e(e,progress){e.Module&&(e.logo||(e.logo=document.createElement("div"),e.logo.className="logo "+e.Module.splashScreenStyle,e.container.appendChild(e.logo)),e.progress||(e.progress=document.createElement("div"),e.progress.className="progress "+e.Module.splashScreenStyle,e.progress.empty=document.createElement("div"),e.progress.empty.className="empty",e.progress.appendChild(e.progress.empty),e.progress.full=document.createElement("div"),e.progress.full.className="full",e.progress.appendChild(e.progress.full),e.container.appendChild(e.progress)),document.querySelector(".percent").innerHTML="Загрузка: "+(100*progress).toFixed(1)+"%",e.progress.full.style.width=100*progress+"%",e.progress.empty.style.width=100*(1-progress)+"%",progress>.01&&t.hide_spinner(),1==progress&&(e.logo.style.display=e.progress.style.display="none",document.querySelector(".cover_back").style.display="none",document.querySelector("#unity-logo").style.display="none"))}var script=document.createElement("script");script.src=t.post.game.fields.unitywebglloaderurl,script.onload=()=>{UnityLoader.SystemInfo.mobile=!1;var r=UnityLoader.instantiate("unityContainer",t.post.game.fields.unitywebglbuildurl,{onProgress:e,Module:{onRuntimeInitialized:function(){e(r,"complete")}}})},document.body.appendChild(script)},startUnity2020(){var t=this;!function(){var e=t.post.game.fields.unitywebglloaderurl,r={dataUrl:t.post.game.fields.dataurl,frameworkUrl:t.post.game.fields.frameworkurl,codeUrl:t.post.game.fields.codeurl,memoryUrl:t.post.game.fields.memoryurl?t.post.game.fields.memoryurl:"",symbolsUrl:t.post.game.fields.symbolsurl?t.post.game.fields.symbolsurl:"",streamingAssetsUrl:t.post.game.fields.streamingassetsurl?t.post.game.fields.streamingassetsurl:"StreamingAssets",companyName:"DefaultCompany",productVersion:"1.0"},canvas=(document.querySelector("#unity-container"),document.querySelector("#unity-canvas")),o=document.querySelector("#unity-loading-bar"),n=document.querySelector("#unity-progress-bar-full");document.querySelector("#unity-mobile-warning"),canvas.style.width="100%",canvas.style.height="100%",o.style.display="block";var script=document.createElement("script");script.src=e,script.onload=()=>{createUnityInstance(canvas,r,(progress=>{n.style.width=100*progress+"%",document.querySelector(".percent").innerHTML="Загрузка: "+(100*progress).toFixed(1)+"%",progress>.01&&t.hide_spinner()})).then((t=>{o.style.display="none"})).catch((t=>{alert(t)}))},document.body.appendChild(script)}()},startUnity5_4(){var a="https://m.igroutka.ru/run/?unity";a+=this.post.game.fields.iframegameheight?"&iframegameheight="+this.post.game.fields.iframegameheight:"",a+=this.post.game.fields.iframegamewidth?"&iframegamewidth="+this.post.game.fields.iframegamewidth:"",a+=this.post.game.fields.unityprogress?"&unityprogress="+this.post.game.fields.unityprogress:"",a+=this.post.game.fields.unitymodule?"&unitymodule="+t.from(this.post.game.fields.unitymodule).toString("base64"):"",a+=this.post.game.fields.unitywebglloaderurl?"&unitywebglloaderurl="+this.post.game.fields.unitywebglloaderurl:"",a+=this.post.game.title?"&title="+this.post.game.title:"";var e=document.getElementById("unity5_4"),data='<iframe onload="'+this.hide_spinner()+'" src="'+a+'" width="100%" height="100%" scrolling="no" frameborder="0" allowfullscreen="true"></iframe>';e.innerHTML=data}}}}).call(this,r(315).Buffer)},316:function(t,e,r){var content=r(373);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(147).default)("272a9eb8",content,!0,{sourceMap:!1})},369:function(t,e,r){"use strict";var o=r(15),n=r(2),l=r(3),d=r(51),c=r(370),m=r(371),h=r(6),f=n.RangeError,y=n.String,v=Math.floor,w=l(m),x=l("".slice),_=l(1..toFixed),k=function(t,e,r){return 0===e?r:e%2==1?k(t,e-1,r*t):k(t*t,e/2,r)},C=function(data,t,e){for(var r=-1,o=e;++r<6;)o+=t*data[r],data[r]=o%1e7,o=v(o/1e7)},S=function(data,t){for(var e=6,r=0;--e>=0;)r+=data[e],data[e]=v(r/t),r=r%t*1e7},U=function(data){for(var t=6,s="";--t>=0;)if(""!==s||0===t||0!==data[t]){var e=y(data[t]);s=""===s?e:s+w("0",7-e.length)+e}return s};o({target:"Number",proto:!0,forced:h((function(){return"0.000"!==_(8e-5,3)||"1"!==_(.9,0)||"1.25"!==_(1.255,2)||"1000000000000000128"!==_(0xde0b6b3a7640080,0)}))||!h((function(){_({})}))},{toFixed:function(t){var e,r,o,n,l=c(this),m=d(t),data=[0,0,0,0,0,0],h="",v="0";if(m<0||m>20)throw f("Incorrect fraction digits");if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return y(l);if(l<0&&(h="-",l=-l),l>1e-21)if(r=(e=function(t){for(var e=0,r=t;r>=4096;)e+=12,r/=4096;for(;r>=2;)e+=1,r/=2;return e}(l*k(2,69,1))-69)<0?l*k(2,-e,1):l/k(2,e,1),r*=4503599627370496,(e=52-e)>0){for(C(data,0,r),o=m;o>=7;)C(data,1e7,0),o-=7;for(C(data,k(10,o,1),0),o=e-1;o>=23;)S(data,1<<23),o-=23;S(data,1<<o),C(data,1,1),S(data,2),v=U(data)}else C(data,0,r),C(data,1<<-e,0),v=U(data)+w("0",m);return v=m>0?h+((n=v.length)<=m?"0."+w("0",m-n)+v:x(v,0,n-m)+"."+x(v,n-m)):h+v}})},370:function(t,e,r){var o=r(3);t.exports=o(1..valueOf)},371:function(t,e,r){"use strict";var o=r(2),n=r(51),l=r(11),d=r(16),c=o.RangeError;t.exports=function(t){var e=l(d(this)),r="",o=n(t);if(o<0||o==1/0)throw c("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(r+=e);return r}},372:function(t,e,r){"use strict";r(316)},373:function(t,e,r){var o=r(146)(!1);o.push([t.i,'.percent{color:#fff;font-size:14px;line-height:50px}.bot_fullscreen svg{width:22px;height:22px}.cover_back{position:absolute;z-index:-1;top:-25px;right:-25px;bottom:-25px;left:-25px;background-size:cover;opacity:.6;filter:blur(10px)}.webgl-content .cover_back{z-index:1}.unity-desktop *{border:0;margin:0;padding:0}.unity-desktop{position:absolute;left:0;top:0;width:100%;height:100%;box-sizing:border-box}.progress,.progressbar,.unity-desktop .logo{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}.unity-desktop .logo{width:100%;max-width:640px;padding:0 32px;box-sizing:border-box;text-align:center}.unity-desktop .logo img{border-radius:15px;background:rgba(0,0,0,.25);box-shadow:inset 0 1px 2px rgb(0 0 0/25%),0 1px rgb(255 255 255/8%);padding:6px}.unity-desktop .logo h2{font-size:30px;color:#fff;line-height:35px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.unity-desktop .logo:after{content:"";display:block;width:100%;height:0}.unity-desktop .progressbar,.webgl-content .progress{height:34px;width:100%;max-width:720px;padding-left:32px;padding-right:32px;margin-top:150px;box-sizing:border-box;z-index:0;border-radius:30px}.unity-desktop .progressbar:after,.webgl-content .progress:after{content:"";display:block;width:100%;height:100%;border-radius:inherit;background:rgba(0,0,0,.25);box-shadow:inset 0 1px 2px rgba(0,0,0,.25),0 1px hsla(0,0%,100%,.08)}.unity-desktop .progressfull,.webgl-content .progress .empty,.webgl-content .progress .full{transition:width .2s ease;border-radius:inherit}.unity-desktop .progressfull,.webgl-content .progress .full{float:left;width:0;height:100%;padding:4px;box-sizing:border-box}.unity-desktop .progressfull:after,.webgl-content .progress .full:after{content:"";display:block;width:100%;height:100%;border-radius:inherit;background:#b43a3a;background:linear-gradient(90deg,#b43a3a,#fd1d1d 31%,#ffae3c);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#b43a3a",endColorstr="#ffae3c",GradientType=1);transition:.4s linear;transition-property:width,background-color}.webgl-content .progress .empty{float:right;width:100%;height:100%;display:none}.game-content{width:100%;height:100%}.game-content>canvas{width:100%!important;height:100%!important}.webgl-content .logo,.webgl-content .progress{z-index:2}',""]),t.exports=o},407:function(t,e,r){"use strict";r.r(e);var o=r(294).a,n=(r(372),r(32)),component=Object(n.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[this.post.game.fields.dataurl?r("div",{staticClass:"unity-desktop full_game",attrs:{id:"unity-container"}},[t._m(0),t._v(" "),r("div",{attrs:{id:"unity-loading-bar"}},[r("div",{staticClass:"logo",attrs:{id:"unity-logo"}},[r("img",{attrs:{src:t.post.game.image,width:"160",height:"160"}}),t._v(" "),r("h2",[t._v(t._s(t.post.game.title))]),t._v(" "),r("div",{staticClass:"percent"},[t._v("Загрузка: 0.0%")])]),t._v(" "),t._m(1)]),t._v(" "),r("div",{staticClass:"cover_back",style:"background-image: url("+t.post.game.image+")"})]):t._e(),t._v(" "),this.post.game.fields.unitywebglbuildurl?r("div",{staticClass:"webgl-content unity-desktop full_game"},[r("div",{staticClass:"game-content",staticStyle:{width:"100%",height:"100%"},attrs:{id:"unityContainer"}}),t._v(" "),r("div",{staticClass:"logo",attrs:{id:"unity-logo"}},[r("img",{attrs:{src:t.post.game.image,width:"160",height:"160"}}),t._v(" "),r("h2",[t._v(t._s(t.post.game.title))]),t._v(" "),r("div",{staticClass:"percent"},[t._v("Загрузка: 0.0%")])]),t._v(" "),r("div",{staticClass:"cover_back",style:"background-image: url("+t.post.game.image+")"})]):t._e(),t._v(" "),this.post.game.fields.unityprogress?r("div",{attrs:{id:"unity5_4"}}):t._e()])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"game-content"},[e("canvas",{attrs:{id:"unity-canvas"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"progressbar",attrs:{id:"unity-progress-bar-empty"}},[e("div",{staticClass:"progressfull",attrs:{id:"unity-progress-bar-full"}})])}],!1,null,null,null);e.default=component.exports}}]);